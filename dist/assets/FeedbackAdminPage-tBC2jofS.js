import{j as e,R as P,r as l,a as R,n as h}from"./index-DDFCQUB-.js";import{c as S,f as C,j as H,b as Q,k as X,l as G,g as J}from"./index-CG-hCczj.js";import{T as K}from"./Skeleton-D6hoDHFB.js";import{T as W}from"./TablePager-BKTiqDT3.js";import"./iconBase-BFTLMTgk.js";const _=({value:a})=>{const n={bug:"bg-red-50 text-red-600",feature:"bg-indigo-50 text-indigo-600",service:"bg-sky-50 text-sky-600",payment:"bg-amber-50 text-amber-700",delivery:"bg-emerald-50 text-emerald-700",other:"bg-gray-100 text-gray-700"},o=n[a]||n.other;return e.jsxDEV("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-medium ${o}`,children:a},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/Atoms.tsx",lineNumber:44,columnNumber:10},void 0)},$=({value:a})=>{const n=Math.max(0,Math.min(5,Number(a)||0));return e.jsxDEV("div",{className:"inline-flex items-center gap-0.5",children:[Array.from({length:5},(o,r)=>e.jsxDEV("svg",{viewBox:"0 0 20 20",className:`w-4 h-4 ${r<n?"fill-amber-400":"fill-gray-200"}`,children:e.jsxDEV("path",{d:"M9.049 2.927a1 1 0 011.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.802 2.036a1 1 0 00-.364 1.118l1.07 3.292c.3.923-.755 1.688-1.54 1.118l-2.802-2.036a1 1 0 00-1.175 0l-2.802 2.036c-.784.57-1.838-.195-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81H7.03a1 1 0 00.95-.69l1.07-3.292z"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/Atoms.tsx",lineNumber:58,columnNumber:11},void 0)},r,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/Atoms.tsx",lineNumber:53,columnNumber:9},void 0)),a?e.jsxDEV("span",{className:"ml-1 text-xs text-gray-500",children:[a,"/5"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/Atoms.tsx",lineNumber:61,columnNumber:16},void 0):null]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/Atoms.tsx",lineNumber:51,columnNumber:5},void 0)};function Z(a){if(!a)return"—";if(typeof a=="string")return a;const{name:n,firstName:o,lastName:r,email:c,_id:i}=a;return n||[o,r].filter(Boolean).join(" ").trim()||c||i||"—"}const ee=a=>{if(!a)return"—";try{return new Date(a).toLocaleString()}catch{return a}},ne=({open:a,detail:n,onClose:o,onDelete:r,deletingId:c})=>{const i=c===n?._id,m=l.useMemo(()=>n?._id?n._id.slice(-6).toUpperCase():"—",[n?._id]),N=l.useMemo(()=>ee(n?.createdAt),[n?.createdAt]),f=n?.subject||"—",D=n?.message||"—",u=l.useMemo(()=>{const p=n?.name?.trim(),t=n?.email?.trim();return!p&&!t?"—":p&&t?`${p} • ${t}`:p||t||"—"},[n?.name,n?.email]),d=l.useMemo(()=>n?.user?Z(n.user):void 0,[n?.user]);return!a||!n?null:e.jsxDEV("div",{className:"fixed inset-0 z-[9999]",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-black/40",onClick:o},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:76,columnNumber:7},void 0),e.jsxDEV("aside",{className:"absolute right-0 top-0 h-full w-full max-w-xl bg-white shadow-2xl border-l p-6 overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{className:"min-w-0",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-[#1e1e38]",children:"Feedback Details"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-0.5",children:["ID ",e.jsxDEV("span",{className:"font-mono",children:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:86,columnNumber:18},void 0)," • ",N]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:85,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:81,columnNumber:11},void 0),e.jsxDEV("button",{onClick:o,className:"p-2 rounded-lg border hover:bg-gray-50","aria-label":"Close",children:e.jsxDEV(S,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:95,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:90,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:80,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(_,{value:n.type},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:103,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:N},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:104,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:102,columnNumber:13},void 0),e.jsxDEV("h3",{className:"mt-2 text-xl font-bold text-[#1e1e38] break-words",children:f},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:107,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV($,{value:n.rating??0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:112,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:111,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:101,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Message"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:D},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:117,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"bg-gray-50 border rounded-lg p-4",children:[e.jsxDEV("h5",{className:"text-sm font-semibold text-gray-700 mb-1",children:"From"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:125,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-gray-800",children:u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:126,columnNumber:15},void 0),d&&e.jsxDEV("p",{className:"text-xs text-gray-500 font-mono mt-1",children:["user: ",d]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:128,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:124,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-gray-50 border rounded-lg p-4",children:[e.jsxDEV("h5",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Context"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:135,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-gray-800 break-all",children:n.pagePath||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:138,columnNumber:15},void 0),n.meta?.userAgent&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:["UA: ",n.meta.userAgent]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:142,columnNumber:17},void 0),n.meta?.appVersion&&e.jsxDEV("p",{className:"text-xs text-gray-500",children:["App: ",n.meta.appVersion]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:147,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:134,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:123,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("button",{onClick:()=>r(n._id),disabled:i,className:"px-4 py-2 text-sm rounded-lg border text-red-600 hover:bg-red-50 disabled:opacity-60 inline-flex items-center gap-2",children:[e.jsxDEV(C,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:161,columnNumber:15},void 0),i?"Deleting…":"Delete"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:156,columnNumber:13},void 0),e.jsxDEV("button",{onClick:o,className:"px-4 py-2 text-sm rounded-lg border hover:bg-gray-50",children:"Close"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:164,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:155,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:99,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:78,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackDetailDrawer.tsx",lineNumber:74,columnNumber:5},void 0)},se=P.memo(ne);async function ae(a){const{page:n=1,limit:o=10,type:r,rating:c,q:i,sort:m}=a||{};return(await R.get("/feedback",{params:{page:n,limit:o,...r&&r!=="all"?{type:r}:{},...c?{rating:c}:{},...i?{q:i}:{},...m?{sort:m}:{}}})).data}async function te(a){return(await R.get(`/feedback/${a}`)).data.data.feedback}async function le(a){await R.delete(`/feedback/${a}`)}const A=["ID#","Type","Subject","Rating","Created","Actions"],oe=({items:a,loading:n=!1,page:o,totalPages:r,onPrev:c,onNext:i,onView:m,onDelete:N,deletingId:f,minRows:D=10})=>{const u=l.useMemo(()=>Math.max(0,D-(Array.isArray(a)?a.length:0)),[a,D]),[d,p]=l.useState(null);return e.jsxDEV("div",{className:"overflow-x-auto bg-white rounded-2xl shadow-sm border border-gray-100",children:[e.jsxDEV("table",{className:"min-w-full",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-[#f0fdf4]",children:A.map(t=>e.jsxDEV("th",{className:"px-6 py-3 text-left text-sm font-medium text-[#22c55e] uppercase",children:t},t,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:64,columnNumber:15},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:62,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:61,columnNumber:9},void 0),n?e.jsxDEV("tbody",{children:e.jsxDEV(K,{rows:D,columns:A.length,cellClassName:"px-6 py-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:77,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:76,columnNumber:11},void 0):a.length===0?e.jsxDEV("tbody",{children:[e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:A.length,className:"px-6 py-10 text-center text-gray-500",children:"No feedback found."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:87,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:86,columnNumber:13},void 0),Array.from({length:Math.max(0,D-1)}).map((t,x)=>e.jsxDEV("tr",{className:"border-t",children:Array.from({length:A.length}).map((g,j)=>e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("div",{className:"h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:99,columnNumber:17},void 0)},j,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:98,columnNumber:15},void 0))},`pad-empty-${x}`,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:96,columnNumber:15},void 0))]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:84,columnNumber:11},void 0):e.jsxDEV("tbody",{className:"divide-y divide-gray-100",children:[a.map(t=>{const x=t._id.slice(-6).toUpperCase(),g=new Date(t.createdAt).toLocaleString();return e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 text-sm text-[#1e1e38] font-mono",children:x},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:113,columnNumber:15},void 0),e.jsxDEV("td",{className:"px-6 py-4 text-sm",children:e.jsxDEV(_,{value:t.type},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:118,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:117,columnNumber:15},void 0),e.jsxDEV("td",{className:"px-6 py-4 text-sm text-[#1e1e38]",children:[e.jsxDEV("div",{className:"line-clamp-1",children:t.subject||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:122,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 line-clamp-1",children:t.message||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:121,columnNumber:15},void 0),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV($,{value:t.rating??0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:129,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:128,columnNumber:15},void 0),e.jsxDEV("td",{className:"px-6 py-4 text-sm text-gray-600",children:g},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:132,columnNumber:15},void 0),e.jsxDEV("td",{className:"px-6 py-4 text-sm relative",children:[e.jsxDEV("button",{onClick:()=>p(d===t._id?null:t._id),className:"inline-flex items-center rounded-md border px-2 py-1.5 hover:bg-gray-50","aria-haspopup":"menu","aria-expanded":d===t._id,"aria-label":"More actions",children:e.jsxDEV(H,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:144,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:135,columnNumber:17},void 0),d===t._id&&e.jsxDEV("div",{role:"menu",className:"absolute right-6 mt-2 w-44 rounded-lg border bg-white shadow-lg ring-1 ring-black/5 z-10",children:[e.jsxDEV("button",{onClick:()=>{p(null),m(t._id)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",role:"menuitem",children:[e.jsxDEV(Q,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:160,columnNumber:21},void 0)," View"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:152,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>N(t._id),disabled:f===t._id,className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${f===t._id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,role:"menuitem",children:[e.jsxDEV(C,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:172,columnNumber:21},void 0),f===t._id?"Deleting…":"Delete"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:162,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:148,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:134,columnNumber:17},void 0)]},t._id,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:112,columnNumber:13},void 0)}),u>0&&Array.from({length:u}).map((t,x)=>e.jsxDEV("tr",{className:"border-t",children:Array.from({length:A.length}).map((g,j)=>e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("div",{className:"h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:188,columnNumber:19},void 0)},j,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:187,columnNumber:17},void 0))},`pad-${x}`,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:185,columnNumber:13},void 0))]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:60,columnNumber:7},void 0),e.jsxDEV("div",{className:"px-6 py-4 flex items-center justify-end",children:e.jsxDEV(W,{page:o,totalPages:r,onPrev:c,onNext:i,disabled:n},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:199,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:198,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/feedback/FeedbackTable.tsx",lineNumber:59,columnNumber:5},void 0)},re=P.memo(oe),ce=["all","bug","feature","service","payment","delivery","other"],de=["all",5,4,3,2,1],xe=()=>{const[a,n]=l.useState([]),[o,r]=l.useState(!1),[c,i]=l.useState(""),[m,N]=l.useState("all"),[f,D]=l.useState("all"),[u,d]=l.useState(1),[p,t]=l.useState(10),[x,g]=l.useState(1),[j,M]=l.useState(!1),[E,V]=l.useState(null),[Y,w]=l.useState(null),F=l.useCallback(async()=>{r(!0);try{const s=await ae({page:u,limit:p,type:m,rating:f==="all"?void 0:f,q:c.trim()||void 0,sort:"-createdAt"});n(s.data.feedback||[]),g(s.totalPages||1)}catch{h.error("Failed to load feedback."),n([]),g(1)}finally{r(!1)}},[u,p,m,f,c]);l.useEffect(()=>{F()},[F]);const L=()=>F(),I=async s=>{try{const k=await te(s);V(k),M(!0)}catch{h.error("Failed to load feedback details.")}},T=async s=>{if(window.confirm("Delete this feedback permanently?"))try{w(s),await le(s),h.success("Feedback deleted."),a.length===1&&u>1?d(k=>Math.max(1,k-1)):F(),E?._id===s&&(M(!1),V(null))}catch{h.error("Delete failed.")}finally{w(null)}},U=()=>{try{const s=["ID","Type","Subject","Rating","Name","Email","Created At","Page"],k=a.map(b=>[b._id,b.type,b.subject?.replace(/\n/g," ").slice(0,200),b.rating??"",b.name??"",b.email??"",new Date(b.createdAt).toLocaleString(),b.pagePath??""]),O=[s,...k].map(b=>b.map(z=>{const y=String(z??"").replace(/"/g,'""');return/[",\n]/.test(y)?`"${y}"`:y}).join(",")).join(`
`),B=new Blob(["\uFEFF"+O],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),q=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");v.href=URL.createObjectURL(B),v.download=`feedback-page${u}-${q}.csv`,document.body.appendChild(v),v.click(),v.remove()}catch{h.error("CSV export failed.")}};return e.jsxDEV("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:[e.jsxDEV("div",{className:"p-4 sm:p-6 border-b border-gray-100 space-y-4",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxDEV("h1",{className:"text-lg font-semibold text-[#1e1e38]",children:"User Feedback"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:161,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[e.jsxDEV("button",{onClick:L,disabled:o,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border text-sm hover:bg-gray-50 disabled:opacity-50",children:[e.jsxDEV(X,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:172,columnNumber:17},void 0)," Refresh"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:167,columnNumber:15},void 0),e.jsxDEV("button",{onClick:U,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border text-sm hover:bg-gray-50",children:[e.jsxDEV(G,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:178,columnNumber:17},void 0)," Export"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:174,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:166,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:160,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-3",children:[e.jsxDEV("div",{className:"relative w-full sm:w-64",children:[e.jsxDEV(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:187,columnNumber:15},void 0),e.jsxDEV("input",{value:c,onChange:s=>i(s.target.value),placeholder:"Search subject/message",className:"w-full pl-9 pr-9 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:188,columnNumber:15},void 0),c&&e.jsxDEV("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>i(""),children:e.jsxDEV(S,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:199,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:186,columnNumber:13},void 0),e.jsxDEV("select",{value:m,onChange:s=>{d(1),N(s.target.value)},className:"border rounded-lg px-3 py-2 text-sm w-full sm:w-auto",children:ce.map(s=>e.jsxDEV("option",{value:s,children:s==="all"?"All types":s.charAt(0).toUpperCase()+s.slice(1)},s,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:214,columnNumber:17},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:205,columnNumber:13},void 0),e.jsxDEV("select",{value:String(f),onChange:s=>{d(1);const k=s.target.value==="all"?"all":Number(s.target.value);D(k)},className:"border rounded-lg px-3 py-2 text-sm w-full sm:w-auto",children:de.map(s=>e.jsxDEV("option",{value:String(s),children:s==="all"?"All ratings":`${s}★`},String(s),!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:236,columnNumber:17},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:223,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Rows:"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:244,columnNumber:15},void 0),e.jsxDEV("select",{value:p,onChange:s=>{t(Number(s.target.value)),d(1)},className:"border rounded-lg px-2 py-2 text-sm",children:[10,20,50].map(s=>e.jsxDEV("option",{value:s,children:s},s,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:254,columnNumber:19},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:245,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:243,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:184,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:159,columnNumber:9},void 0),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV(re,{items:a,loading:o,page:u,totalPages:x,onPrev:()=>d(s=>Math.max(1,s-1)),onNext:()=>d(s=>Math.min(x,s+1)),onView:I,onDelete:T,deletingId:Y},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:265,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:264,columnNumber:9},void 0),e.jsxDEV("div",{className:"px-4 sm:px-6 py-4 text-xs text-gray-500 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:e.jsxDEV("span",{children:["Showing ",e.jsxDEV("strong",{children:a.length},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:281,columnNumber:21},void 0)," row(s) • Page"," ",e.jsxDEV("strong",{children:u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:282,columnNumber:13},void 0)," of"," ",e.jsxDEV("strong",{children:Math.max(x,1)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:283,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:280,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:279,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:158,columnNumber:7},void 0),e.jsxDEV(se,{open:j,detail:E,onClose:()=>M(!1),onDelete:T,deletingId:Y},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:289,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/FeedbackAdminPage.tsx",lineNumber:156,columnNumber:5},void 0)};export{xe as default};
