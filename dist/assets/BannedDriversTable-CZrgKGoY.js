import{R as T,d as y,r as l,n as A,j as e}from"./index-DDFCQUB-.js";import{b as V}from"./index-ByTCOamh.js";import{j as Y}from"./deliveryService-DaazW6EG.js";import{T as w}from"./TablePager-BKTiqDT3.js";import{A as S}from"./AvatarCell-CcUu114p.js";import{g as P}from"./getImageUrl-z_uDr8Pb.js";import{s as C,g as L}from"./s3-cbPBZTLb.js";import"./iconBase-BFTLMTgk.js";const U=i=>i?new Date(i).toLocaleDateString("en-GB"):"-",E=new Map,F=()=>e.jsxDEV("tr",{className:"animate-pulse",children:Array.from({length:7}).map((i,d)=>e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"h-4 rounded bg-gray-200 w-full"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:43,columnNumber:9},void 0)},d,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:42,columnNumber:7},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:40,columnNumber:3},void 0),q=T.memo(()=>{y();const[i,d]=l.useState([]),[u,p]=l.useState(1),[D,_]=l.useState(10),[N,b]=l.useState(1),[f,v]=l.useState(!1),[x,j]=l.useState(""),[h,k]=l.useState({}),g=l.useCallback(async(n,o,m)=>{v(!0),j("");try{const r=await Y(n,o);d(r?.data?.users??[]),b(Number(r?.totalPages??1)),p(r?.page??n)}catch(r){if(r?.name==="CanceledError"||r?.name==="AbortError")return;d([]),b(1),j("Failed to fetch banned drivers"),A.error(r?.response?.data?.message||"Failed to fetch banned drivers")}finally{v(!1)}},[]);l.useEffect(()=>{const n=new AbortController;return g(u,D,n.signal),()=>n.abort()},[g,u,D]),l.useEffect(()=>{let n=!1;const o=Array.from(new Set((i||[]).map(s=>s.profilePicture).filter(s=>typeof s=="string"&&s.length>0))),m=s=>{const a=/^https?:/i.test(s),t=a&&/amazonaws\.com/.test(s),c=!a&&!s.startsWith("/");return t||c},r=o.filter(s=>m(s)).map(async s=>{const a=C(s),t=E.get(a);if(t)return{original:s,url:t};try{const c=await L(a,300);return n?null:(E.set(a,c),{original:s,url:c})}catch{return null}});return Promise.all(r).then(s=>{if(n)return;const a={};for(const t of s)t&&t.url&&(a[t.original]=t.url);Object.keys(a).length&&k(t=>({...t,...a}))}),()=>{n=!0}},[i]);const M=()=>p(n=>Math.max(1,n-1)),R=()=>p(n=>Math.min(N||1,n+1)),B=l.useMemo(()=>f?Array.from({length:6}).map((n,o)=>e.jsxDEV(F,{},o,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:134,columnNumber:67},void 0)):x?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:7,className:"px-4 py-6 text-center text-red-600",children:x},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:138,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:137,columnNumber:9},void 0):i.length?i.map(n=>{const o=`${n.firstName??""} ${n.lastName??""}`.trim()||"-",m=U(n.createdAt),r=h[n.profilePicture||""]||P(n.profilePicture||"");return e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-4 text-center",children:e.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[e.jsxDEV(S,{fullName:o,src:r,size:40},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:161,columnNumber:15},void 0),e.jsxDEV("span",{className:"hidden md:inline text-sm text-[#1e1e38]",children:o},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:162,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:160,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:159,columnNumber:11},void 0),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-center text-[#1e1e38]",children:n.email||"-"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:167,columnNumber:11},void 0),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-center text-[#1e1e38]",children:n.phone||"-"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:170,columnNumber:11},void 0),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-center text-[#1e1e38]",children:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:173,columnNumber:11},void 0),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-center",children:e.jsxDEV("button",{onClick:()=>A.success("Restore logic here"),className:"p-2 rounded-lg hover:bg-gray-100","aria-label":"Restore driver",children:e.jsxDEV(V,{className:"text-blue-600 w-5 h-5"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:182,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:177,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:176,columnNumber:11},void 0)]},n._id,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:158,columnNumber:9},void 0)}):e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:7,className:"px-4 py-6 text-center text-gray-500",children:"No banned drivers found"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:146,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:145,columnNumber:9},void 0),[i,x,f,h]);return e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:e.jsxDEV("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Banned Drivers"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:193,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:192,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl border shadow-sm overflow-hidden",children:[e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-[#f0fdf4]",children:[e.jsxDEV("th",{className:"px-4 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Profile"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:203,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-4 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Email"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:206,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-4 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Phone"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:209,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-4 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Banned At"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:212,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-4 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Actions"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:215,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:202,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:201,columnNumber:13},void 0),e.jsxDEV("tbody",{className:"divide-y divide-gray-200",children:B},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:220,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:200,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:199,columnNumber:9},void 0),e.jsxDEV("div",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxDEV(w,{page:u,totalPages:N,onPrev:M,onNext:R,disabled:f},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:226,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500",children:["Showing ",e.jsxDEV("strong",{children:i.length},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:234,columnNumber:23},void 0)," item(s)"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:233,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:225,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:224,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:198,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/drivers/BannedDriversTable.tsx",lineNumber:191,columnNumber:5},void 0)});export{q as default};
