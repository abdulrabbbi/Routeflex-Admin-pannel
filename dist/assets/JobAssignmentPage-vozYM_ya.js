import{j as e,r as n,a as Y,n as V,h as L,d as S,y as P}from"./index-DDFCQUB-.js";import{E as J}from"./EmptyStateRow-DnQyE9Zp.js";import{b as C,c as $,g as O,h as _,i as F}from"./index-CG-hCczj.js";import{b as I,m as U}from"./index-CtE0lt8R.js";import{T as z}from"./Skeleton-D6hoDHFB.js";import{O as q}from"./OrderDetail-PQmCKLaz.js";import{T as B}from"./TablePager-BKTiqDT3.js";const W={green:"bg-green-100 text-green-700",yellow:"bg-yellow-100 text-yellow-700",red:"bg-red-100 text-red-700",blue:"bg-blue-100 text-blue-700",gray:"bg-gray-100 text-gray-700",indigo:"bg-indigo-100 text-indigo-700"};function f({color:t="gray",className:o="",children:r}){return e.jsxDEV("span",{className:`px-2 py-1 rounded-md text-xs font-semibold ${W[t]} ${o}`,children:r},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/shared/Tag.tsx",lineNumber:22,columnNumber:5},this)}const H=t=>typeof t=="number"?new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t):"—";function K(t){if(t.status==="cancelled")return e.jsxDEV(f,{color:"red",children:"Cancelled"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:15,columnNumber:42},this);if(t.approvalStatus==="rejected")return e.jsxDEV(f,{color:"red",children:"Rejected"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:16,columnNumber:49},this);if(t.approvalStatus==="approved")return e.jsxDEV(f,{color:"green",children:"Approved"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:18,columnNumber:12},this);if(t.approvalStatus==="pending"&&t.status!=="available")return e.jsxDEV(f,{color:"yellow",children:"Pending"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:20,columnNumber:12},this);switch(t.status){case"available":return e.jsxDEV(f,{color:"gray",children:"Available"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:24,columnNumber:14},this);case"accepted":return e.jsxDEV(f,{color:"blue",children:"Accepted"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:26,columnNumber:14},this);case"in-progress":return e.jsxDEV(f,{color:"indigo",children:"In-progress"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:28,columnNumber:14},this);case"completed":return e.jsxDEV(f,{color:"green",children:"Completed"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:30,columnNumber:14},this);default:return e.jsxDEV(f,{color:"gray",children:t.status||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:32,columnNumber:14},this)}}function Q({rows:t,loading:o,onView:r,onAssign:a}){const[m,p]=n.useState(!1),[u,x]=n.useState(null),d=g=>{x(g),p(!0)};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"overflow-x-auto bg-white rounded-2xl border",children:[e.jsxDEV("table",{className:"min-w-[820px] w-full",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-[#f0fdf4] text-[#22c55e] text-xs uppercase",children:[e.jsxDEV("th",{className:"px-4 py-3 text-left",children:"Order"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:61,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left",children:"Price"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:62,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left",children:"Distance (km)"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:63,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left",children:"Customer Name"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:64,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left",children:"Status"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:65,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-right",children:"Action"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:60,columnNumber:13},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("tbody",{className:"divide-y divide-gray-100",children:o?e.jsxDEV(z,{columns:6,rows:5},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:72,columnNumber:15},this):t.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:6,className:"p-0",children:e.jsxDEV("div",{className:" grid place-items-center text-center px-4",children:e.jsxDEV(J,{colSpan:6,title:"No jobs found",hint:"Try refreshing."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:77,columnNumber:21},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:76,columnNumber:19},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:75,columnNumber:17},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:74,columnNumber:15},this):(()=>{const h=Math.max(0,10-t.length);return[...t,...Array(h).fill(null)].map((l,j)=>{if(!l)return e.jsxDEV("tr",{className:"hover:bg-transparent",children:[e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"h-4 w-20 bg-gray-50 rounded animate-pulse","aria-hidden":!0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:94,columnNumber:27},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:93,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"h-4 w-16 bg-gray-50 rounded animate-pulse","aria-hidden":!0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:100,columnNumber:27},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:99,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"h-4 w-24 bg-gray-50 rounded animate-pulse","aria-hidden":!0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:106,columnNumber:27},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:105,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"h-4 w-44 bg-gray-50 rounded animate-pulse","aria-hidden":!0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:112,columnNumber:27},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:111,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"h-6 w-20 bg-gray-50 rounded-full animate-pulse","aria-hidden":!0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:118,columnNumber:27},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:117,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("div",{className:"h-8 w-16 bg-gray-50 rounded-md animate-pulse","aria-hidden":!0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:125,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:124,columnNumber:27},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:123,columnNumber:25},this)]},`pad-${j}`,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:92,columnNumber:23},this);const A=`#${l._id.slice(-6).toUpperCase()}`,k=H(l.route?.price),N=typeof l.route?.distance=="number"?l.route.distance.toFixed(2):"—",b=l.route?.business?.email||"—";return e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-4 font-semibold text-sm text-gray-900",children:A},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:146,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-gray-800",children:k},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:149,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-gray-800",children:N},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:150,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-4 text-sm text-gray-800",children:b},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:151,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-4",children:K(l)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:152,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex items-center justify-center gap-2",children:[e.jsxDEV("button",{onClick:()=>d(l._id),className:"text-green-600 text-xl px-3 py-2 rounded-full hover:bg-gray-300",title:"View Details",children:e.jsxDEV(C,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:160,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:155,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>a(l._id),className:"text-green-600 text-xl px-3 py-2 rounded-full hover:bg-gray-300",title:"Assign Delivery",children:e.jsxDEV(I,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:167,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:162,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:154,columnNumber:25},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:153,columnNumber:23},this)]},l._id,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:145,columnNumber:21},this)})})()},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:70,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:58,columnNumber:9},this),u&&e.jsxDEV(q,{open:m,onClose:()=>p(!1),orderId:u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:180,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:57,columnNumber:7},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobsTableLite.tsx",lineNumber:56,columnNumber:5},this)}const X=({open:t,onOpenChange:o,children:r})=>{const a=n.useRef(null);return n.useEffect(()=>{if(!t)return;const m=p=>{p.key==="Escape"&&o(!1)};return document.addEventListener("keydown",m),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",m),document.body.style.overflow=""}},[t,o]),t?e.jsxDEV("div",{ref:a,className:"fixed inset-0 z-50 flex items-center justify-center","aria-modal":"true",role:"dialog",onClick:m=>{m.target===a.current&&o(!1)},children:[e.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Dialog.tsx",lineNumber:40,columnNumber:7},void 0),e.jsxDEV("div",{className:"relative z-10 w-full max-w-3xl mx-4 animate-scaleIn",children:r},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Dialog.tsx",lineNumber:42,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Dialog.tsx",lineNumber:30,columnNumber:5},void 0):null},Z=({children:t,className:o=""})=>e.jsxDEV("div",{className:`bg-white rounded-2xl shadow-xl ring-1 ring-black/5 ${o}`,children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Dialog.tsx",lineNumber:57,columnNumber:5},void 0),G=({children:t,className:o=""})=>e.jsxDEV("div",{className:`mb-0 ${o}`,children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Dialog.tsx",lineNumber:71,columnNumber:10},void 0),ee=({children:t,className:o=""})=>e.jsxDEV("h2",{className:`text-xl font-bold ${o}`,children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Dialog.tsx",lineNumber:75,columnNumber:10},void 0),se=({children:t,...o})=>e.jsxDEV("button",{...o,className:`bg-[#22c55e] text-white px-4 py-2 rounded hover:bg-[#16a34a]" disabled:opacity-50 disabled:cursor-not-allowed ${o.className??""}`,children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/ui/Button.tsx",lineNumber:5,columnNumber:5},void 0);function te({job:t,open:o,onOpenChange:r,onAssigned:a}){const[m,p]=n.useState([]),[u,x]=n.useState(1),[d,g]=n.useState(10),[h,v]=n.useState(1),[l,j]=n.useState(!1),[A,k]=n.useState(null),[N,b]=n.useState(""),R=async(s=u,c=d)=>{j(!0);try{const D=await Y.get("/users/drivers/active",{params:{page:s,limit:c}});p(D.data?.data?.drivers||[]),x(D.data?.page||s),v(D.data?.totalPages||1)}catch{p([]),v(1),V.error("Failed to load drivers")}finally{j(!1)}};n.useEffect(()=>{o&&R(1,d)},[o,d]),n.useEffect(()=>{o&&R(u,d)},[u]);const E=n.useMemo(()=>{const s=N.trim().toLowerCase();return s?m.filter(c=>`${c.firstName||""} ${c.lastName||""}`.toLowerCase().includes(s)||(c.phone||"").toLowerCase().includes(s)):m},[N,m]),i=async s=>{if(t)try{k(s),await Y.post(`/jobs/admin/jobs/${t._id}/assign`,{driverId:s}),V.success("Job assigned"),r(!1),a()}catch{V.error("Failed to assign job")}finally{k(null)}};function M(s){if(!s)return"—";const c=/countryISOCode:\s*([A-Z]{2}),\s*countryCode:\s*([+\d]+),\s*number:\s*(\d+)/,D=s.match(c);if(!D)return s;const[,y,w,T]=D;return`${w} ${T} (${y})`}return e.jsxDEV(X,{open:o,onOpenChange:s=>{r(s),s||(b(""),x(1))},children:e.jsxDEV(Z,{className:"max-w-3xl bg-white rounded-2xl p-0 shadow-2xl",children:[e.jsxDEV(G,{className:"px-6 pt-5 pb-4 border-b",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[e.jsxDEV("div",{className:"min-w-0",children:[e.jsxDEV(ee,{className:"text-lg font-semibold text-gray-900",children:"Assign to Driver"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:138,columnNumber:15},this),t&&e.jsxDEV("div",{className:"mt-1 text-sm text-gray-500",children:["Order #",t._id.slice(-6)," •"," ",t.route?.pickupTime?new Date(t.route.pickupTime).toLocaleString():"—"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:142,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:137,columnNumber:13},this),e.jsxDEV("button",{type:"button",onClick:()=>r(!1),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100","aria-label":"Close dialog",children:e.jsxDEV($,{className:"h-5 w-5"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:156,columnNumber:15},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:136,columnNumber:11},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:135,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 py-5",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[e.jsxDEV("div",{className:"relative w-full sm:max-w-xs",children:[e.jsxDEV(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:165,columnNumber:15},this),e.jsxDEV("input",{placeholder:"Search driver name or phone…",value:N,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:166,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Rows:"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:176,columnNumber:17},this),e.jsxDEV("select",{value:d,onChange:s=>{g(Number(s.target.value)),x(1)},className:"border rounded-lg px-2 py-1 text-sm",children:[10,20,50].map(s=>e.jsxDEV("option",{value:s,children:s},s,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:186,columnNumber:21},this))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:177,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:175,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("button",{className:"px-3 py-1.5 rounded-lg border hover:bg-gray-50 disabled:opacity-50",onClick:()=>x(s=>Math.max(1,s-1)),disabled:l||u<=1,children:"← Prev"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:193,columnNumber:17},this),e.jsxDEV("span",{children:["Page ",e.jsxDEV("b",{children:u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:201,columnNumber:24},this)," of ",e.jsxDEV("b",{children:h},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:201,columnNumber:48},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:200,columnNumber:17},this),e.jsxDEV("button",{className:"px-3 py-1.5 rounded-lg border hover:bg-gray-50 disabled:opacity-50",onClick:()=>x(s=>s+1),disabled:l||u>=h,children:"Next →"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:203,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:192,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:174,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white rounded-xl border overflow-hidden",children:e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsxDEV("colgroup",{children:[e.jsxDEV("col",{className:"w-[120px]"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:219,columnNumber:19},this)," ",e.jsxDEV("col",{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:220,columnNumber:19},this)," ",e.jsxDEV("col",{className:"w-[180px]"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:221,columnNumber:19},this)," ",e.jsxDEV("col",{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:222,columnNumber:19},this)," ",e.jsxDEV("col",{className:"w-[140px]"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:223,columnNumber:19},this)," "]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:218,columnNumber:17},this),e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-[#f0fdf4]",children:[{h:"Driver ID",align:"text-center"},{h:"Full Name",align:"text-left"},{h:"Phone",align:"text-left"},{h:"Vehicle",align:"text-left"},{h:"Actions",align:"text-center"}].map(({h:s,align:c})=>e.jsxDEV("th",{className:`px-4 py-2 uppercase text-xs text-[#22c55e] ${c}`,children:s},s,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:235,columnNumber:23},this))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:227,columnNumber:19},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:226,columnNumber:17},this),e.jsxDEV("tbody",{className:"divide-y divide-gray-100",children:l?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"Loading…"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:248,columnNumber:23},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:247,columnNumber:21},this):E.length===0?e.jsxDEV(J,{colSpan:5,title:"No active drivers",hint:"Adjust search or try later."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:256,columnNumber:21},this):E.map(s=>{const c=s._id.slice(-6).toUpperCase(),D=`${s.firstName||""} ${s.lastName||""}`.trim()||"—",y=s.vehicle?.make||s.vehicle?.model?`${s.vehicle?.make||""} ${s.vehicle?.model||""}`.trim():"—";return e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3 text-gray-700 text-center whitespace-nowrap font-mono",children:c},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:276,columnNumber:27},this),e.jsxDEV("td",{className:"px-4 py-3 text-gray-800",children:e.jsxDEV("span",{className:"inline-flex items-center gap-1.5",children:[e.jsxDEV(_,{className:"text-gray-400"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:283,columnNumber:31},this),e.jsxDEV("span",{className:"truncate",children:D},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:284,columnNumber:31},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:282,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:281,columnNumber:27},this),e.jsxDEV("td",{className:"px-4 py-3 text-gray-700 whitespace-nowrap",children:e.jsxDEV("span",{className:"inline-flex items-center gap-1.5",children:[e.jsxDEV(F,{className:"text-gray-400"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:291,columnNumber:31},this),e.jsxDEV("span",{children:M(s.phone)||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:292,columnNumber:31},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:290,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:289,columnNumber:27},this),e.jsxDEV("td",{className:"px-4 py-3 text-gray-700",children:e.jsxDEV("span",{className:"truncate block",children:y},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:298,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:297,columnNumber:27},this),e.jsxDEV("td",{className:"px-4 py-3 text-center",children:e.jsxDEV(se,{onClick:()=>i(s._id),disabled:A===s._id,title:"Assign job to this driver",className:"bg-green-600 text-white px-4 py-2 text-sm hover:bg-emerald-700 rounded-lg disabled:opacity-60",children:A===s._id?"Assigning…":e.jsxDEV(U,{className:"font-bold text-md"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:309,columnNumber:71},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:303,columnNumber:29},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:302,columnNumber:27},this)]},s._id,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:274,columnNumber:25},this)})},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:245,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:217,columnNumber:15},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:216,columnNumber:13},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:215,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:161,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:134,columnNumber:7},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/AssignDriverDialog.tsx",lineNumber:124,columnNumber:5},this)}function oe(){const[t,o]=L(),r=Math.max(1,Number(t.get("page")||1)),a=Math.max(1,Number(t.get("limit")||10)),[m,p]=n.useState(!1),[u,x]=n.useState([]),[d,g]=n.useState(1),[h,v]=n.useState(!1),[l,j]=n.useState(null),A=S(),k=n.useMemo(()=>({page:r,limit:a,status:"available",approvalStatus:"approved"}),[r,a]),N=async(i=r,M=a)=>{p(!0);try{const s=await Y.get("/jobs/admin/jobs/available",{params:k}),c=s.data?.data?.jobs||[];x(c),g(Math.max(1,s.data?.totalPages||1))}catch(s){P.error(s?.response?.data?.message||"Failed to load jobs"),x([]),g(1)}finally{p(!1)}};n.useEffect(()=>{N(r,a)},[r,a]);const b=(i,M)=>{const s=new URLSearchParams(t);s.set(i,String(M)),i!=="page"&&s.set("page","1"),o(s,{replace:!0})},R=i=>{const M=u.find(s=>s._id===i)||null;j(M),v(!0)},E=i=>{A(`/orders/${i}`)};return e.jsxDEV("div",{className:"p-4 md:p-6 space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-[#22c55e]",children:"Available Orders"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV("select",{value:a,onChange:i=>b("limit",Number(i.target.value)),className:"border rounded-lg px-2 py-1.5 text-sm",children:[10,20,50].map(i=>e.jsxDEV("option",{value:i,children:[i," / page"]},i,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:82,columnNumber:15},this))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:73,columnNumber:7},this),e.jsxDEV(Q,{rows:u,loading:m,onAssign:R,onView:E},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:90,columnNumber:7},this),e.jsxDEV("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:["Page ",e.jsxDEV("b",{children:r},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:93,columnNumber:53},this)," of ",e.jsxDEV("b",{children:d},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:93,columnNumber:70},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV(B,{page:r,totalPages:d,onPrev:()=>b("page",Math.max(1,r-1)),onNext:()=>b("page",Math.min(d,r+1)),disabled:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:92,columnNumber:7},this),e.jsxDEV(te,{job:l,open:h,onOpenChange:v,onAssigned:()=>N(r,a)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:103,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/orders/JobAssignmentPage.tsx",lineNumber:72,columnNumber:5},this)}const ue=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ue as J,oe as O,f as T};
