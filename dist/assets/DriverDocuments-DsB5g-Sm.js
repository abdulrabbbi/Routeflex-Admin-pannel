import{y as R,r as s,j as e}from"./index-DDFCQUB-.js";import{g as w,s as k,l as V}from"./s3-cbPBZTLb.js";import{c as Y,d as y,e as P}from"./index-CG-hCczj.js";const O=(n,l)=>{const t=n?.response?.data?.message||n?.message||l;R.error(t)};function U({value:n,size:l=128,fallbackSrc:t="/placeholder.svg",className:o=""}){const[a,c]=s.useState(t),[m,r]=s.useState(!!n);return s.useEffect(()=>{let i=!0;return(async()=>{try{if(!n){c(t),r(!1);return}r(!0);const d=await w(k(n),300);i&&c(d||t)}catch{i&&c(t)}finally{i&&r(!1)}})(),()=>{i=!1}},[n,t]),e.jsxDEV("img",{src:m?t:a,alt:"avatar",width:l,height:l,className:`rounded-full object-cover border-4 border-[#22c55e] ${o}`},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/AvatarSigned.tsx",lineNumber:47,columnNumber:5},this)}function L({open:n,onClose:l,title:t="Document",url:o,isImage:a=!0,loading:c=!1,error:m}){const[r,i]=s.useState(!1),[d,D]=s.useState(null);if(s.useEffect(()=>{i(!!(o&&a)),D(null)},[o,a]),!n)return null;const f=c||a&&r&&!m;return e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",role:"dialog","aria-modal":"true","aria-label":`${t} preview`,children:e.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-3xl overflow-hidden shadow-lg",children:[e.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsxDEV("h4",{className:"font-semibold",children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:45,columnNumber:11},this),e.jsxDEV("button",{className:"text-gray-500 hover:text-gray-700 p-1 rounded focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:l,"aria-label":"Close preview",children:e.jsxDEV(Y,{size:22},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:51,columnNumber:13},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:46,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:44,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 min-h-[320px] flex items-center justify-center",children:m?e.jsxDEV("p",{className:"text-red-600 text-sm",children:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:57,columnNumber:13},this):o?a?e.jsxDEV("div",{className:"relative w-full h-[60vh] max-h-[70vh] flex items-center justify-center",children:[f&&e.jsxDEV("div",{className:"absolute inset-0 rounded-lg bg-gray-200 overflow-hidden",children:e.jsxDEV("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_1.4s_infinite] bg-gradient-to-r from-transparent via-white/60 to-transparent"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:64,columnNumber:19},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:63,columnNumber:17},this),e.jsxDEV("style",{children:"@keyframes shimmer { 100% { transform: translateX(100%);} }"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:67,columnNumber:15},this),e.jsxDEV("img",{src:o,alt:t,className:`max-h-[70vh] w-auto max-w-full rounded object-contain transition-opacity duration-300 ${r?"opacity-0":"opacity-100"}`,onLoad:()=>i(!1),onError:()=>{i(!1),D("Failed to load image.")}},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:68,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:61,columnNumber:13},this):e.jsxDEV("a",{href:o,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:"Open document in new tab"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:82,columnNumber:13},this):e.jsxDEV("div",{className:"text-sm text-gray-500",children:"Preparing previewâ€¦"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:59,columnNumber:13},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:55,columnNumber:9},this),d&&o&&e.jsxDEV("div",{className:"px-4 pb-4 -mt-2 space-y-1",children:[e.jsxDEV("p",{className:"text-xs text-red-600",children:d},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:95,columnNumber:13},this),e.jsxDEV("a",{href:o,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline break-all",children:"Open image in new tab"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:94,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:43,columnNumber:7},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DocumentPreviewModal.tsx",lineNumber:37,columnNumber:5},this)}const I={driverLicenseFront:"Driver License (Front)",driverLicenseBack:"Driver License (Back)",vehicleInsurance:"Vehicle Insurance",goodsForHireInsurance:"Goods for Hire Insurance",publicLiabilityInsurance:"Public Liability Insurance",proofOfAddress:"Proof of Address",rightToWork:"Right to Work",nationalInsurance:"National Insurance",disclosureReceipt:"Disclosure Receipt",dvlaCheck:"DVLA Check"},M=new Map;function T({documents:n,labels:l=I}){const[t,o]=s.useState(!1),[a,c]=s.useState(""),[m,r]=s.useState(),[i,d]=s.useState(!0),[D,f]=s.useState(!1),[E,N]=s.useState(null),v=s.useRef(null),h=s.useMemo(()=>Object.entries(n||{}),[n]);async function A(u,b){v.current?.abort();const x=new AbortController;v.current=x,N(null),o(!0),r(void 0),c(l[u]||u),f(!0);try{const p=k(b);d(V(p));const j=M.get(p);if(j){r(j);return}const g=await w(p,300);if(x.signal.aborted)return;M.set(p,g),r(g)}catch{x.signal.aborted||N("Could not load document.")}finally{x.signal.aborted||f(!1)}}return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"bg-white rounded-lg border",children:[e.jsxDEV("div",{className:"bg-[#f0fdf4] px-4 py-3 border-b",children:e.jsxDEV("h3",{className:"font-semibold text-[#22c55e] flex items-center gap-2",children:[e.jsxDEV(y,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:79,columnNumber:13},this)," Documents"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:78,columnNumber:11},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:77,columnNumber:9},this),e.jsxDEV("div",{className:"p-4",children:h.length===0?e.jsxDEV("p",{className:"text-sm text-gray-500",children:"No documents uploaded."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:85,columnNumber:13},this):e.jsxDEV("ul",{className:"grid grid-cols-1",children:h.map(([u,b])=>e.jsxDEV("li",{children:e.jsxDEV("button",{type:"button",className:"w-full flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#22c55e]/40 rounded",onClick:()=>A(u,b),children:[e.jsxDEV("span",{className:"text-sm",children:l[u]||u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:95,columnNumber:21},this),e.jsxDEV("span",{className:"flex items-center gap-2",children:[e.jsxDEV(P,{className:"text-[#22c55e] w-4 h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:97,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs text-[#22c55e]",children:"View"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:98,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:96,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:90,columnNumber:19},this)},u,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:89,columnNumber:17},this))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:87,columnNumber:13},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:83,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:76,columnNumber:7},this),e.jsxDEV(L,{open:t,onClose:()=>{v.current?.abort(),o(!1),N(null)},title:a,url:m,isImage:i,loading:D,error:E||void 0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:108,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/driverDetail/DriverDocuments.tsx",lineNumber:75,columnNumber:5},this)}export{U as A,T as D,O as h};
