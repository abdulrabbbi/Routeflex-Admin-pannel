import{a as V,j as e,r as l,n as v}from"./index-DDFCQUB-.js";import{b as A,A as S,B as C}from"./index-CtE0lt8R.js";import{g as w,c as F,k as L,l as $}from"./index-CG-hCczj.js";import"./iconBase-BFTLMTgk.js";const T=async(t=1,r=10,a="monthly")=>{try{return(await V.get("/deliveries/payment-report",{params:{page:t,limit:r,filter:a}})).data?.data??[]}catch(o){return console.error("Failed to fetch payment report",o),[]}},q=async(t="monthly")=>{try{return(await V.get("/deliveries/payment-stats",{params:{filter:t}})).data?.data??null}catch(r){return console.error("Failed to fetch payment stats",r),null}},R=()=>e.jsxDEV("div",{className:"p-4 bg-white rounded shadow animate-pulse",children:[e.jsxDEV("div",{className:"h-4 w-32 bg-gray-200 rounded mb-3"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:11,columnNumber:5},void 0),e.jsxDEV("div",{className:"h-6 w-24 bg-gray-200 rounded"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:12,columnNumber:5},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:10,columnNumber:3},void 0),B=({stats:t,loading:r})=>{if(r)return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(R,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:20,columnNumber:9},void 0),e.jsxDEV(R,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:21,columnNumber:9},void 0),e.jsxDEV(R,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:22,columnNumber:9},void 0),e.jsxDEV(R,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:23,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:19,columnNumber:7},void 0);if(!t)return null;const{parcelsOnMove:a={current:0,total:0},paymentReceived:o={current:0,total:0},driversPendingPayment:f={current:0,total:0}}=t||{},m=t.inRange??t.last7Days??{completedParcels:0,totalPayments:0,activeDrivers:0};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-white rounded shadow",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-600",children:"Parcels on Move"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:48,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xl font-bold",children:[a.current," / ",a.total]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:49,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:47,columnNumber:9},void 0),e.jsxDEV(A,{className:"w-10 h-10 text-blue-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:53,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:46,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-white rounded shadow",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-600",children:"Payments Received"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:58,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xl font-bold",children:[o.current," / ",o.total]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:59,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:57,columnNumber:9},void 0),e.jsxDEV(S,{className:"w-10 h-10 text-green-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:63,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:56,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-white rounded shadow",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-600",children:"Drivers Pending Payment"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:68,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xl font-bold",children:[f.current," / ",f.total]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:69,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV(C,{className:"w-10 h-10 text-orange-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:73,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:66,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-white rounded shadow",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-600",children:"Selected Range"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:78,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm",children:["Completed Parcels: ",e.jsxDEV("span",{className:"font-semibold",children:m.completedParcels},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:80,columnNumber:32},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:79,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm",children:["Total Payments: ",e.jsxDEV("span",{className:"font-semibold",children:m.totalPayments},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:83,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:82,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm",children:["Active Drivers: ",e.jsxDEV("span",{className:"font-semibold",children:m.activeDrivers},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:86,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:85,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:77,columnNumber:9},void 0),e.jsxDEV(A,{className:"w-10 h-10 text-purple-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:89,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:76,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/StatCards.tsx",lineNumber:45,columnNumber:5},void 0)},O=({message:t,colSpan:r=5})=>e.jsxDEV("tbody",{children:e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:r,className:"h-40",children:e.jsxDEV("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:12,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:11,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:10,columnNumber:5},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:9,columnNumber:3},void 0),U=({rows:t=6,cols:r=5})=>e.jsxDEV("tbody",{className:"divide-y divide-gray-100",children:Array.from({length:t}).map((a,o)=>e.jsxDEV("tr",{className:"animate-pulse",children:Array.from({length:r}).map((f,m)=>e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("div",{className:"h-4 bg-gray-200 rounded w-24"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:26,columnNumber:13},void 0)},`${o}-${m}`,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:25,columnNumber:11},void 0))},o,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:23,columnNumber:7},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:21,columnNumber:3},void 0),_=({text:t,tone:r})=>e.jsxDEV("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${r==="green"?"bg-[#f0fdf4] text-[#16a34a]":"bg-red-50 text-red-600"}`,children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:35,columnNumber:3},void 0),I=({page:t,canPrev:r,canNext:a,onPrev:o,onNext:f,disabled:m})=>e.jsxDEV("div",{className:"inline-flex items-center gap-2",children:[e.jsxDEV("button",{onClick:o,disabled:!r||m,className:"px-3 py-1.5 rounded-lg border text-sm disabled:opacity-50 hover:bg-gray-50",children:"← Prev"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:60,columnNumber:5},void 0),e.jsxDEV("span",{className:"text-sm text-gray-600",children:["Page ",t]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:67,columnNumber:5},void 0),e.jsxDEV("button",{onClick:f,disabled:!a||m,className:"px-3 py-1.5 rounded-lg border text-sm disabled:opacity-50 hover:bg-gray-50",children:"Next →"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:68,columnNumber:5},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:59,columnNumber:3},void 0),Q=({data:t,loading:r,page:a,limit:o,canNext:f,onPrev:m,onNext:k,onLimitChange:j,onRefresh:P,onMarkPaid:y})=>{const[c,x]=l.useState(""),[i,M]=l.useState("all"),h=a>1,N=l.useMemo(()=>{const n=c.trim().toLowerCase();return t.filter(u=>{const s=!n||u.driver?.toLowerCase().includes(n)||String(u.sequence??"").toLowerCase().includes(n),p=i==="all"?!0:i==="pending"?String(u.paymentReceived).toLowerCase()==="pending":String(u.paymentReceived).toLowerCase()==="received";return s&&p})},[t,c,i]),b=()=>{try{const n=["No#","Driver","Delivery Status","Payment Received by Sender"],u=N.map(D=>[D.sequence??"-",D.driver??"-",D.deliveryStatus??"-",D.paymentReceived??"-"]),s=[n,...u].map(D=>D.map(Y=>{const E=String(Y??"").replace(/"/g,'""');return/[",\n]/.test(E)?`"${E}"`:E}).join(",")).join(`
`),p=new Blob(["\uFEFF"+s],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),g=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");d.href=URL.createObjectURL(p),d.download=`drivers-payments-page${a}-${g}.csv`,document.body.appendChild(d),d.click(),d.remove()}catch{v.error("CSV export failed.")}};return e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:[e.jsxDEV("div",{className:"p-6 border-b border-gray-100",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-[#1e1e38]",children:"Drivers to be Paid"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:165,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:170,columnNumber:15},void 0),e.jsxDEV("input",{value:c,onChange:n=>x(n.target.value),placeholder:"Search driver / No#",className:"pl-9 pr-9 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:171,columnNumber:15},void 0),c&&e.jsxDEV("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>x(""),"aria-label":"Clear",children:e.jsxDEV(F,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:183,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:178,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:169,columnNumber:13},void 0),e.jsxDEV("select",{value:i,onChange:n=>M(n.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[e.jsxDEV("option",{value:"all",children:"All"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:194,columnNumber:15},void 0),e.jsxDEV("option",{value:"pending",children:"Pending"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV("option",{value:"received",children:"Received"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:196,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:189,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Rows:"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:201,columnNumber:15},void 0),e.jsxDEV("select",{value:o,onChange:n=>j(Number(n.target.value)),className:"border rounded-lg px-2 py-2 text-sm",children:[10,20,50].map(n=>e.jsxDEV("option",{value:n,children:n},n,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:208,columnNumber:19},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:202,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:200,columnNumber:13},void 0),e.jsxDEV("button",{onClick:P,disabled:r,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border text-sm hover:bg-gray-50 disabled:opacity-50",children:[e.jsxDEV(L,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:221,columnNumber:15},void 0)," Refresh"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:216,columnNumber:13},void 0),e.jsxDEV("button",{onClick:b,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border text-sm hover:bg-gray-50",children:[e.jsxDEV($,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:227,columnNumber:15},void 0)," Export"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:223,columnNumber:13},void 0),e.jsxDEV(I,{page:a,canPrev:h,canNext:f,onPrev:m,onNext:k,disabled:r},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:230,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:167,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:164,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:163,columnNumber:7},void 0),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-[#f0fdf4]",children:["No#","Driver","Delivery Status","Payment Received by Sender","Action"].map(n=>e.jsxDEV("th",{className:"px-6 py-3 text-left text-sm font-medium text-[#22c55e] uppercase",children:n},n,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:249,columnNumber:19},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:246,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:245,columnNumber:11},void 0),r?e.jsxDEV(U,{rows:6,cols:5},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:261,columnNumber:13},void 0):N.length===0?e.jsxDEV(O,{message:"No drivers found for the current filters.",colSpan:5},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:263,columnNumber:13},void 0):e.jsxDEV("tbody",{className:"divide-y divide-gray-100",children:N.map((n,u)=>{const s=String(n.paymentReceived).toLowerCase()==="pending";return e.jsxDEV("tr",{className:`${u%2===0?"bg-[#f8fafc]":"bg-white"} hover:bg-gray-50`,children:[e.jsxDEV("td",{className:"px-6 py-4 text-sm text-[#1e1e38]",children:n.sequence??"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:274,columnNumber:21},void 0),e.jsxDEV("td",{className:"px-6 py-4 text-sm text-[#1e1e38]",children:n.driver??"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:277,columnNumber:21},void 0),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV(_,{text:n.deliveryStatus??"—",tone:String(n.deliveryStatus).toLowerCase()==="completed"?"green":"red"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:281,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:280,columnNumber:21},void 0),e.jsxDEV("td",{className:"px-6 py-4",children:[e.jsxDEV("span",{className:`inline-flex w-2 h-2 rounded-full align-middle ${s?"bg-red-500":"bg-[#22c55e]"}`},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:291,columnNumber:23},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-[#1e1e38]",children:n.paymentReceived??"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:296,columnNumber:23},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:290,columnNumber:21},void 0),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("button",{onClick:()=>y(n),disabled:!s,className:`px-4 py-2 text-sm rounded-lg transition ${s?"bg-[#22c55e] text-white hover:bg-[#1ea550]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:s?"Mark as Paid":"Paid"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:301,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:300,columnNumber:21},void 0)]},`${n.sequence}-${u}`,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:270,columnNumber:19},void 0)})},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:265,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:244,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:243,columnNumber:7},void 0),e.jsxDEV("div",{className:"px-6 py-4 text-xs text-gray-500 flex items-center justify-between",children:e.jsxDEV("span",{children:["Showing ",e.jsxDEV("strong",{children:N.length},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:324,columnNumber:19},void 0)," row(s)",c?" (filtered)":""," • Page ",e.jsxDEV("strong",{children:a},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:325,columnNumber:43},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:323,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:322,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/DriverPayment.tsx",lineNumber:161,columnNumber:5},void 0)},K=()=>{const[t,r]=l.useState("monthly"),[a,o]=l.useState([]),[f,m]=l.useState(null),[k,j]=l.useState(!1),[P,y]=l.useState(!1),[c,x]=l.useState(1),[i,M]=l.useState(10),[h,N]=l.useState(!1),b=l.useCallback(async s=>{y(!0);try{const p=await q(s);m(p)}catch{v.error("Failed to load dashboard stats.")}finally{y(!1)}},[]),n=l.useCallback(async(s,p,d)=>{j(!0);try{const g=await T(s,p,d);o(g||[]),N((g?.length??0)>=p)}catch{v.error("Failed to load payment list."),o([]),N(!1)}finally{j(!1)}},[]);l.useEffect(()=>{b(t),n(c,i,t)},[]),l.useEffect(()=>{x(1),b(t),n(1,i,t)},[t,i,n,b]),l.useEffect(()=>{n(c,i,t)},[c,i,t,n]);const u=async s=>{try{o(p=>p.map(d=>d===s?{...d,paymentReceived:"Received",deliveryStatus:d.deliveryStatus??"Completed"}:d)),v.success("Marked as paid.")}catch{v.error("Could not mark as paid.")}};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxDEV("h1",{className:"text-xl font-semibold text-[#1e1e38]",children:"Payments"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:106,columnNumber:11},void 0),e.jsxDEV("div",{className:"inline-flex rounded-xl border border-gray-200 bg-white p-1 shadow-sm",children:["daily","weekly","monthly","yearly"].map(s=>e.jsxDEV("button",{onClick:()=>r(s),className:`px-3.5 py-2 text-sm font-medium rounded-lg transition ${t===s?"bg-[#22c55e] text-white shadow":"text-gray-700 hover:bg-gray-50"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:109,columnNumber:15},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:107,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:105,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.jsxDEV(B,{stats:f,loading:P},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:126,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:125,columnNumber:9},void 0),e.jsxDEV(Q,{data:a,loading:k,page:c,limit:i,canNext:h,onPrev:()=>x(s=>Math.max(1,s-1)),onNext:()=>x(s=>h?s+1:s),onLimitChange:s=>{M(s),x(1)},onRefresh:()=>n(c,i,t),onMarkPaid:u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:130,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:103,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/pages/PaymentPage.tsx",lineNumber:102,columnNumber:5},void 0)};export{K as default};
