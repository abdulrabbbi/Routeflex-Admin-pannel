import{r as c,R as w,g as W,j as e,L as Z,n as R}from"./index-DDFCQUB-.js";import{C as K}from"./ConfirmModal-uZavRhhf.js";import{E as Q}from"./EmptyStateRow-DnQyE9Zp.js";import{T as X}from"./Skeleton-D6hoDHFB.js";import{b as ee,f as ne}from"./index-CG-hCczj.js";import{I as re}from"./index-DSxBz7PK.js";import{l as M}from"./leaflet-DHXD0kNQ.js";import{k as te,l as se,n as ie}from"./deliveryService-DaazW6EG.js";import{s as le,g as oe}from"./s3-cbPBZTLb.js";import{g as ae}from"./getImageUrl-z_uDr8Pb.js";import{O as ce}from"./OrderDetail-PQmCKLaz.js";function de(t,r){const s=c.useRef(r);c.useEffect(function(){r!==s.current&&t.attributionControl!=null&&(s.current!=null&&t.attributionControl.removeAttribution(s.current),r!=null&&t.attributionControl.addAttribution(r)),s.current=r},[t,r])}function me(t,r,s){r.center!==s.center&&t.setLatLng(r.center),r.radius!=null&&r.radius!==s.radius&&t.setRadius(r.radius)}const ue=1;function pe(t){return Object.freeze({__version:ue,map:t})}function H(t,r){return Object.freeze({...t,...r})}const $=c.createContext(null),F=$.Provider;function T(){const t=c.useContext($);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function fe(t){function r(s,i){const{instance:l,context:n}=t(s).current;return c.useImperativeHandle(i,()=>l),s.children==null?null:w.createElement(F,{value:n},s.children)}return c.forwardRef(r)}function xe(t){function r(s,i){const{instance:l}=t(s).current;return c.useImperativeHandle(i,()=>l),null}return c.forwardRef(r)}function _(t,r){const s=c.useRef();c.useEffect(function(){return r!=null&&t.instance.on(r),s.current=r,function(){s.current!=null&&t.instance.off(s.current),s.current=null}},[t,r])}function Y(t,r){const s=t.pane??r.pane;return s?{...t,pane:s}:t}function O(t,r,s){return Object.freeze({instance:t,context:r,container:s})}function z(t,r){return r==null?function(i,l){const n=c.useRef();return n.current||(n.current=t(i,l)),n}:function(i,l){const n=c.useRef();n.current||(n.current=t(i,l));const o=c.useRef(i),{instance:a}=n.current;return c.useEffect(function(){o.current!==i&&(r(a,i,o.current),o.current=i)},[a,i,l]),n}}function U(t,r){c.useEffect(function(){return(r.layerContainer??r.map).addLayer(t.instance),function(){r.layerContainer?.removeLayer(t.instance),r.map.removeLayer(t.instance)}},[r,t])}function De(t){return function(s){const i=T(),l=t(Y(s,i),i);return de(i.map,s.attribution),_(l.current,s.eventHandlers),U(l.current,i),l}}function Ne(t,r){const s=c.useRef();c.useEffect(function(){if(r.pathOptions!==s.current){const l=r.pathOptions??{};t.instance.setStyle(l),s.current=l}},[t,r])}function ve(t){return function(s){const i=T(),l=t(Y(s,i),i);return _(l.current,s.eventHandlers),U(l.current,i),Ne(l.current,s),l}}function B(t,r){const s=z(t,r),i=ve(s);return fe(i)}function be(t,r){const s=z(t,r),i=De(s);return xe(i)}function je(t,r,s){const{opacity:i,zIndex:l}=r;i!=null&&i!==s.opacity&&t.setOpacity(i),l!=null&&l!==s.zIndex&&t.setZIndex(l)}function G(){return T().map}const he=B(function({center:r,children:s,...i},l){const n=new M.CircleMarker(r,i);return O(n,H(l,{overlayContainer:n}))},me);function V(){return V=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},V.apply(this,arguments)}function ke({bounds:t,boundsOptions:r,center:s,children:i,className:l,id:n,placeholder:o,style:a,whenReady:d,zoom:u,...p},D){const[v]=c.useState({className:l,id:n,style:a}),[N,m]=c.useState(null);c.useImperativeHandle(D,()=>N?.map??null,[N]);const x=c.useCallback(b=>{if(b!==null&&N===null){const j=new M.Map(b,p);s!=null&&u!=null?j.setView(s,u):t!=null&&j.fitBounds(t,r),d!=null&&j.whenReady(d),m(pe(j))}},[]);c.useEffect(()=>()=>{N?.map.remove()},[N]);const f=N?w.createElement(F,{value:N},i):o??null;return w.createElement("div",V({},v,{ref:x}),f)}const ge=c.forwardRef(ke),ye=B(function({positions:r,...s},i){const l=new M.Polyline(r,s);return O(l,H(i,{overlayContainer:l}))},function(r,s,i){s.positions!==i.positions&&r.setLatLngs(s.positions)}),Re=be(function({url:r,...s},i){const l=new M.TileLayer(r,Y(s,i));return O(l,i)},function(r,s,i){je(r,s,i);const{url:l}=s;l!=null&&l!==i.url&&r.setUrl(l)});var A={exports:{}},S;function we(){return S||(S=1,(function(t){var r={};function s(n){return Math.floor(Math.abs(n)+.5)*(n>=0?1:-1)}function i(n,o,a){n=s(n*a),o=s(o*a);var d=(n-o)*2;d<0&&(d=-d-1);for(var u="";d>=32;)u+=String.fromCharCode((32|d&31)+63),d/=32;return u+=String.fromCharCode((d|0)+63),u}r.decode=function(n,o){for(var a=0,d=0,u=0,p=[],D=0,v=0,N=null,m,x,f=Math.pow(10,Number.isInteger(o)?o:5);a<n.length;){N=null,D=1,v=0;do N=n.charCodeAt(a++)-63,v+=(N&31)*D,D*=32;while(N>=32);m=v&1?(-v-1)/2:v/2,D=1,v=0;do N=n.charCodeAt(a++)-63,v+=(N&31)*D,D*=32;while(N>=32);x=v&1?(-v-1)/2:v/2,d+=m,u+=x,p.push([d/f,u/f])}return p},r.encode=function(n,o){if(!n.length)return"";for(var a=Math.pow(10,Number.isInteger(o)?o:5),d=i(n[0][0],0,a)+i(n[0][1],0,a),u=1;u<n.length;u++){var p=n[u],D=n[u-1];d+=i(p[0],D[0],a),d+=i(p[1],D[1],a)}return d};function l(n){for(var o=[],a=0;a<n.length;a++){var d=n[a].slice();o.push([d[1],d[0]])}return o}r.fromGeoJSON=function(n,o){if(n&&n.type==="Feature"&&(n=n.geometry),!n||n.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return r.encode(l(n.coordinates),o)},r.toGeoJSON=function(n,o){var a=r.decode(n,o);return{type:"LineString",coordinates:l(a)}},t.exports&&(t.exports=r)})(A)),A.exports}var Me=we();const Ee=W(Me);function Ae({points:t,path:r}){const s=G();return c.useEffect(()=>{const i=[];if(t?.length&&i.push(...t.map(o=>[o.lat,o.lng])),r?.length)for(const o of r){const a=Array.isArray(o)?o:null;a&&a.length>=2&&i.push([a[0],a[1]])}if(!i.length)return;const l=()=>{try{s.fitBounds(i,{padding:[24,24]}),setTimeout(()=>{const a=s;a&&a._mapPane&&s.invalidateSize()},60)}catch{}},n=s;n&&n._loaded?l():n?.whenReady?.(l)},[s,t,r]),null}function Ve(){const t=G();return c.useEffect(()=>{const r=()=>{const i=t;i&&i._mapPane&&t.invalidateSize()},s=t;s&&s._loaded?setTimeout(r,0):s?.whenReady?.(()=>setTimeout(r,0))},[t]),null}function Te({cars:t,polyline:r,encodedPolyline:s,height:i=280,className:l=""}){const n=t||[],o=c.useMemo(()=>{if(r&&r.length)return r;try{if(s&&typeof s=="string"&&s.length>0)return Ee.decode(s).map(d=>[d[0],d[1]])}catch{}return[]},[r,s]),a=c.useMemo(()=>n.length?[n[0].lat,n[0].lng]:o.length?o[0]:[51.5074,-.1278],[n,o]);return e.jsxDEV("div",{className:l,style:{height:i},children:e.jsxDEV(ge,{center:a,zoom:12,scrollWheelZoom:!1,style:{height:"100%",width:"100%",borderRadius:12,overflow:"hidden"},children:[e.jsxDEV(Re,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:89,columnNumber:9},this),o.length>1&&e.jsxDEV(ye,{positions:o,pathOptions:{color:"#3b82f6",weight:4,opacity:.7}},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:95,columnNumber:11},this),n.map((d,u)=>e.jsxDEV(he,{center:[d.lat,d.lng],radius:6,pathOptions:{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:1,weight:0}},`${d.lat},${d.lng},${u}`,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:99,columnNumber:11},this)),e.jsxDEV(Ae,{points:n,path:o},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:107,columnNumber:9},this),e.jsxDEV(Ve,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:108,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:83,columnNumber:7},this)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/Maps/ParcelMap.tsx",lineNumber:82,columnNumber:5},this)}const P=new Map;function I({value:t,alt:r,className:s="w-full h-40 object-cover rounded border",skeletonClassName:i="w-full h-40 rounded bg-gray-200 animate-pulse border"}){const[l,n]=c.useState(null),[o,a]=c.useState(!0),d=c.useRef(null);return c.useEffect(()=>{let u=!1;return(async()=>{const D=t||"";if(!D){a(!1);return}try{const v=/^https?:/i.test(D),N=v&&/amazonaws\.com/.test(D),m=!v&&!D.startsWith("/");if(N||m){const x=le(D),f=P.get(x);if(f)n(f);else{const b=await oe(x,300);!u&&b&&(P.set(x,b),n(b))}}else n(ae(D)||D)}catch{n(t||null)}finally{u||a(!1)}})(),()=>{u=!0}},[t]),e.jsxDEV("div",{ref:d,className:"relative",children:[o&&e.jsxDEV("div",{className:i},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:75,columnNumber:19},this),!o&&l&&e.jsxDEV("img",{src:l,alt:r,className:`${s} ${o?"opacity-0":"opacity-100"}`,onLoad:()=>a(!1),onError:()=>n(null)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:77,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:74,columnNumber:5},this)}const Ye=({open:t,onClose:r,deliveryId:s})=>{const[i,l]=c.useState(!1),[n,o]=c.useState(null),[a,d]=c.useState(!1),[u,p]=c.useState(null),D=m=>{p(m),d(!0)};c.useEffect(()=>{let m=!0;async function x(){if(t){l(!0);try{const f=await te(s);m&&o(f)}catch(f){R.error(f?.response?.data?.message||"Failed to load delivery"),m&&o(null)}finally{m&&l(!1)}}}return x(),()=>{m=!1}},[t,s]);function v(m){if(!m)return"—";const x=/countryISOCode:\s*([A-Z]{2}),\s*countryCode:\s*([+\d]+),\s*number:\s*(\d+)/,f=m.match(x);if(!f)return m;const[,b,j,y]=f;return`${j} ${y} (${b})`}const N=c.useMemo(()=>{if(!n?.route)return[];const m=[],x=n.route.start?.location?.coordinates;Array.isArray(x)&&x.length===2&&m.push({lng:x[0],lat:x[1]});for(const f of n.route.stops||[]){const b=f.location?.coordinates;Array.isArray(b)&&b.length===2&&m.push({lng:b[0],lat:b[1]})}return m.map(f=>({lat:f.lat,lng:f.lng}))},[n]);return t?e.jsxDEV("div",{className:"fixed inset-0 z-[1200] flex",children:[e.jsxDEV("div",{className:"flex-1 bg-black/40",onClick:r},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:169,columnNumber:7},void 0),e.jsxDEV("div",{className:"w-full max-w-[720px] h-full bg-white shadow-xl overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Parcel Details"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:175,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,className:"p-2 rounded hover:bg-gray-100",children:e.jsxDEV(re,{size:22},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:177,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:174,columnNumber:9},void 0),i?e.jsxDEV("div",{className:"p-6 text-gray-500",children:"Loading…"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:183,columnNumber:11},void 0):n?e.jsxDEV("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex flex-col items-center text-center",children:[e.jsxDEV(I,{value:n.driver?.profilePicture,alt:`${n.driver?.firstName||""} ${n.driver?.lastName||""}`,className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full object-cover border shadow-sm",skeletonClassName:"w-28 h-28 sm:w-32 sm:h-32 rounded-full bg-gray-200 animate-pulse"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:190,columnNumber:15},void 0),e.jsxDEV("p",{className:"mt-3 text-lg font-semibold",children:[n.driver?.firstName," ",n.driver?.lastName]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:196,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:n.driver?.email},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:199,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-500 text-sm",children:v(n.driver?.phone)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:200,columnNumber:15},void 0),e.jsxDEV(Z,{className:"bg-indigo-100 px-2 py-1 mt-2 font-semibold rounded-full text-sm text-indigo-500  ",to:`/tracking/driver/${n.driver?._id}/profile/overview`,children:"View Detail"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:189,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxDEV("div",{className:"p-4 rounded-xl border shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxDEV("div",{className:"flex-col",children:[e.jsxDEV("div",{className:"flex justify-center sm:justify-end",children:n.route?.qrCode?e.jsxDEV("img",{src:n.route.qrCode,alt:"QR Code",className:"w-24 h-24 sm:w-32 sm:h-32 object-contain border rounded-md"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:213,columnNumber:23},void 0):e.jsxDEV("p",{className:"text-gray-500 text-xs",children:"No QR code"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:219,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:211,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Order #"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:223,columnNumber:21},void 0),e.jsxDEV("p",{onClick:()=>D(n.delivery?.job),className:"text-base font-bold",children:n.delivery?.job},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:224,columnNumber:21},void 0),e.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:["Picked by: ",e.jsxDEV("strong",{children:n.parcelPickedBy},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:226,columnNumber:34},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:225,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:"Tracking ID"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:228,columnNumber:21},void 0),e.jsxDEV("p",{className:"font-semibold tracking-wide",children:n.driver?.trackingId},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:229,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:222,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:210,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:209,columnNumber:15},void 0),e.jsxDEV("div",{className:"p-4 rounded-xl border shadow-sm flex flex-col justify-between gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Status"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:239,columnNumber:19},void 0),e.jsxDEV("span",{className:"inline-block mt-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:n.delivery.status},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:240,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:238,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Completed At"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:245,columnNumber:19},void 0),e.jsxDEV("span",{className:"inline-block mt-1 px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:n.delivery.completedAt?new Date(n.delivery.completedAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:246,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:244,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Payment"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:260,columnNumber:19},void 0),e.jsxDEV("span",{className:"inline-block mt-1 px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:n.delivery.paymentStatus},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:261,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:259,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Distance"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:266,columnNumber:19},void 0),e.jsxDEV("span",{className:"inline-block mt-1 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[n.route.distance?.toFixed(1)," km"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:267,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:265,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:237,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:207,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 rounded-xl border shadow-sm",children:[e.jsxDEV("h4",{className:"font-semibold mb-3",children:"Current Task"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:276,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid gap-4 sm:grid-cols-2 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-500",children:"Pickup"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:279,columnNumber:19},void 0),e.jsxDEV("p",{className:"font-medium",children:n.currentTaskDetails.pickupLocation||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:280,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-500 mt-1",children:"Time"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:281,columnNumber:19},void 0),e.jsxDEV("p",{className:"font-medium",children:n.currentTaskDetails.pickupTime||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:282,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:278,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-500",children:"Delivery"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:285,columnNumber:19},void 0),e.jsxDEV("p",{className:"font-medium",children:n.currentTaskDetails.deliveryLocation||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:286,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-500 mt-1",children:"Time"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:287,columnNumber:19},void 0),e.jsxDEV("p",{className:"font-medium",children:n.currentTaskDetails.deliveryTime||"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:288,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:284,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:277,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:275,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-3",children:"Route Map"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:295,columnNumber:15},void 0),e.jsxDEV("div",{className:"rounded-lg overflow-hidden border",children:e.jsxDEV(Te,{cars:N,encodedPolyline:n.route.polyline||void 0},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:297,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:296,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex flex-wrap sm:flex-nowrap justify-between gap-4 mt-4 rounded-md border p-3 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Distance"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:302,columnNumber:19},void 0),e.jsxDEV("p",{children:[n.route?.distance," km"]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:303,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:301,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Pickup Time"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:306,columnNumber:19},void 0),e.jsxDEV("p",{children:n.route.pickupTime?new Date(n.route.pickupTime).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:307,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:305,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Delivery Time"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:321,columnNumber:19},void 0),e.jsxDEV("p",{children:n.route.deliveryTime?new Date(n.route.deliveryTime).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:322,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:320,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:300,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:294,columnNumber:13},void 0),n.delivery.photos&&e.jsxDEV("div",{className:"p-4 rounded-xl border shadow-sm",children:[e.jsxDEV("h4",{className:"font-semibold mb-3",children:"Photos"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:341,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.entries(n.delivery.photos).map(([m,x])=>x?e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-gray-500 mb-1",children:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:346,columnNumber:25},void 0),e.jsxDEV(I,{value:x,alt:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:347,columnNumber:25},void 0)]},m,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:345,columnNumber:23},void 0):null)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:342,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:340,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid gap-4 sm:grid-cols-3",children:[{label:"Listed Price",value:n.prices.routeListPrice},{label:"Driver Earnings",value:n.prices.driverEarnings},{label:"Platform Fee",value:n.prices.platformFee}].map(({label:m,value:x})=>e.jsxDEV("div",{className:"p-4 rounded-xl border shadow-sm text-center",children:[e.jsxDEV("p",{className:"text-xs text-gray-500",children:m},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:363,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xl font-bold",children:x!=null?`£${x}`:"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:364,columnNumber:19},void 0)]},m,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:362,columnNumber:17},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:356,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:187,columnNumber:11},void 0):e.jsxDEV("div",{className:"p-6 text-red-600",children:"Failed to load data."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:185,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:172,columnNumber:7},void 0),u&&e.jsxDEV(ce,{open:a,onClose:()=>d(!1),orderId:u},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:373,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/TrackOrderDrawer.tsx",lineNumber:167,columnNumber:5},void 0):null},Oe=({d:t,onDelete:r,disabled:s})=>{const[i,l]=c.useState(!1),n=c.useMemo(()=>typeof t.distance=="number"?`${t.distance.toFixed(1)} km`:"—",[t.distance]);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center",children:String(t.parcelId).slice(-6).toUpperCase()},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:29,columnNumber:9},void 0),e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center cursor-pointer",onClick:()=>{l(!0)},children:t.driverId??"—"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:30,columnNumber:9},void 0),e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center",children:t.driverName},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:38,columnNumber:9},void 0),e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center",children:e.jsxDEV("span",{className:"px-3 py-3 rounded-full text-xs font-medium bg-green-100 text-green-700",children:t.status},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:40,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:39,columnNumber:9},void 0),e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center hidden md:table-cell",children:n},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:53,columnNumber:9},void 0),e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center hidden md:table-cell",children:t.package},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:54,columnNumber:9},void 0),e.jsxDEV("td",{className:"px-3 py-3 text-sm text-center flex items-center justify-center",children:[e.jsxDEV("button",{className:" text-center px-3 py-3 text-green-600 hover:bg-gray-50 text-sm",onClick:()=>{l(!0)},title:"View Details",children:e.jsxDEV(ee,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:74,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:66,columnNumber:11},void 0),e.jsxDEV("button",{className:"text-center px-3 py-3 hover:bg-gray-50 text-sm text-red-600",onClick:()=>r(t.parcelId),title:"Delete Delivery",children:e.jsxDEV(ne,{},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:82,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:77,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:55,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:28,columnNumber:7},void 0),e.jsxDEV(Ye,{open:i,onClose:()=>l(!1),deliveryId:t.parcelId},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:112,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesRow.tsx",lineNumber:26,columnNumber:5},void 0)},Ce=[{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"monthly",label:"Monthly"},{id:"six_months",label:"6M"},{id:"yearly",label:"Year"}],Le=({value:t,onChange:r,disabled:s})=>e.jsxDEV("div",{className:"inline-flex rounded-xl border border-gray-200 bg-white p-1 shadow-sm",children:Ce.map(i=>e.jsxDEV("button",{onClick:()=>r(i.id),disabled:s,className:`px-3 md:px-4 py-2 text-sm font-medium rounded-lg transition disabled:opacity-50 ${t===i.id?"bg-[#22c55e] text-white shadow":"text-gray-700 hover:bg-gray-50"}`,children:i.label},i.id,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/SegmentedToggle.tsx",lineNumber:20,columnNumber:9},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/SegmentedToggle.tsx",lineNumber:18,columnNumber:5},void 0),Se=({filter:t,setFilter:r,limit:s,setLimit:i,onExport:l,disabled:n})=>e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxDEV("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Completed Orders "},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:16,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV(Le,{value:t,onChange:r,disabled:n},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:19,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Rows:"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:22,columnNumber:11},void 0),e.jsxDEV("select",{value:s,onChange:o=>i(Number(o.target.value)),className:"border rounded-lg px-2 py-1 text-sm disabled:opacity-50",disabled:n,children:[10,20,50].map(o=>e.jsxDEV("option",{value:o,children:o},o,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:30,columnNumber:15},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:23,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:21,columnNumber:9},void 0),e.jsxDEV("button",{onClick:l,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border bg-white hover:bg-gray-50 text-sm font-medium disabled:opacity-50",disabled:n,children:"⬇️ Export (.csv)"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:37,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:18,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesHeader.tsx",lineNumber:15,columnNumber:5},void 0),Pe=({page:t,totalPages:r,onPrev:s,onNext:i,disabled:l})=>e.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[e.jsxDEV("button",{disabled:t<=1||l,onClick:s,className:"px-4 py-2 rounded-lg border text-sm font-medium disabled:opacity-50 hover:bg-gray-50",children:"← Previous"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/Pagination.tsx",lineNumber:11,columnNumber:5},void 0),e.jsxDEV("span",{className:"text-sm text-gray-600",children:["Page ",e.jsxDEV("strong",{children:t},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/Pagination.tsx",lineNumber:19,columnNumber:12},void 0)," of ",e.jsxDEV("strong",{children:Math.max(r,1)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/Pagination.tsx",lineNumber:19,columnNumber:39},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/Pagination.tsx",lineNumber:18,columnNumber:5},void 0),e.jsxDEV("button",{disabled:t>=r||l||r===0,onClick:i,className:"px-4 py-2 rounded-lg border text-sm font-medium disabled:opacity-50 hover:bg-gray-50",children:"Next →"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/Pagination.tsx",lineNumber:21,columnNumber:5},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/Pagination.tsx",lineNumber:10,columnNumber:3},void 0);function Ie({deliveries:t,filter:r,page:s}){const i=["Parcel ID","Driver ID","Driver Name","Status","Payment","Distance (km)","Package","Pickup Address","Delivery Address"],l=t.map(p=>[String(p.parcelId).slice(-6).toUpperCase(),p.driverId??"",p.driverName,p.status,p.payment,typeof p.distance=="number"?p.distance.toFixed(1):"",p.package,p.pickupAddress??"",p.deliveryAddress??""]),n=[i,...l].map(p=>p.map(D=>`"${String(D??"").replace(/"/g,'""')}"`).join(",")).join(`
`),o=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),d=document.createElement("a"),u=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");d.href=a,d.download=`deliveries-${r}-page${s}-${u}.csv`,document.body.appendChild(d),d.click(),d.remove(),URL.revokeObjectURL(a)}function He(t){const[r,s]=c.useState([]),[i,l]=c.useState("daily"),[n,o]=c.useState(1),[a,d]=c.useState(10),[u,p]=c.useState(1),[D,v]=c.useState(!1),[N,m]=c.useState(""),x=D&&n===1&&r.length===0&&!N,f=c.useCallback(async(k=1,E=i,C=a)=>{try{v(!0),m("");const h=await se(C,k,E,t);let g=h?.data?.deliveries??[];t&&(g=g.filter(J=>J.status.toLowerCase()===t.toLowerCase())),s(g);const L=typeof h?.total=="number"?h.total:0,q=typeof h?.totalPages=="number"?h.totalPages:L>0?Math.max(1,Math.ceil(L/C)):1;p(q),o(h?.page??k)}catch(h){s([]),p(1);const g=h?.response?.data?.message||"Failed to fetch deliveries";m(g),R.error(g)}finally{v(!1)}},[i,a,t]);return c.useEffect(()=>{f(1,i,a)},[f,i,a]),{deliveries:r,filter:i,setFilter:l,page:n,setPage:o,limit:a,setLimit:d,totalPages:u,isLoading:D,isInitialLoading:x,err:N,fetchDeliveries:f,onPrev:()=>n>1&&f(n-1,i,a),onNext:()=>n<u&&f(n+1,i,a),removeDelivery:async k=>{try{await ie(k),R.success("Delivery deleted"),r.length===1&&n>1?f(n-1,i,a):f(n,i,a)}catch{R.error("Failed to delete delivery")}}}}const Ke=w.memo(({statusFilter:t})=>{const{deliveries:r,filter:s,setFilter:i,page:l,limit:n,setLimit:o,totalPages:a,isLoading:d,isInitialLoading:u,err:p,onPrev:D,onNext:v,removeDelivery:N}=He(t),[m,x]=c.useState(!1),[f,b]=c.useState(null),j=()=>{try{Ie({deliveries:r,filter:s,page:l})}catch{console.error("Export failed")}},y=c.useMemo(()=>d?e.jsxDEV(X,{columns:8,rows:Math.max(5,Math.min(n,10)),cellHeight:16,cellClassName:"px-4 py-4"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:49,columnNumber:9},void 0):p?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:8,className:"px-4 py-6 text-center text-red-600",children:p},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:60,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:59,columnNumber:9},void 0):r.length?e.jsxDEV(e.Fragment,{children:r.map(k=>e.jsxDEV(Oe,{d:k,onDelete:E=>{b(E),x(!0)},disabled:d},k.parcelId,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:74,columnNumber:11},void 0))},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:72,columnNumber:7},void 0):e.jsxDEV(Q,{colSpan:8,title:"No deliveries found",hint:"Try changing filters or refreshing."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:68,columnNumber:9},void 0),[r,d,p,n]);return e.jsxDEV("div",{className:"p-6","aria-busy":d,children:[e.jsxDEV(K,{isOpen:m,onClose:()=>x(!1),onConfirm:async()=>{f&&(await N(f),x(!1),b(null))},title:"Delete Delivery",message:"Are you sure you want to delete this delivery? This action cannot be undone."},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:90,columnNumber:7},void 0),u,e.jsxDEV(Se,{filter:s,setFilter:i,limit:n,setLimit:o,onExport:j,disabled:d},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:106,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl border shadow-sm overflow-hidden",children:[e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-[#f0fdf4]",children:[e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Parcel ID"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:120,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Driver ID"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:121,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Driver Name"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:122,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Status"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:123,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center hidden md:table-cell",children:"Distance"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:125,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center hidden md:table-cell",children:"Package"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:126,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-2 py-3 text-xs text-[#22c55e] uppercase text-center",children:"Actions"},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:127,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:119,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("tbody",{className:"divide-y divide-gray-200",children:y},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:130,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:117,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:116,columnNumber:9},void 0),e.jsxDEV("div",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxDEV(Pe,{page:l,totalPages:a,onPrev:D,onNext:v,disabled:d},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:136,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500",children:["Showing ",e.jsxDEV("strong",{children:r.length},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:144,columnNumber:23},void 0)," item(s) • Range:"," ",e.jsxDEV("strong",{className:"capitalize",children:s==="six_months"?"six months":s},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:145,columnNumber:15},void 0)," ","• Limit ",n]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:143,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:135,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:134,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:115,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Desktop/MY projects/Routeflex-Admin-pannel/src/components/deliveries/DeliveriesTable.tsx",lineNumber:89,columnNumber:5},void 0)});export{Ke as D};
